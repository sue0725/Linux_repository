# 파일과 디렉터리의 소유권과 허가권

* 리눅스는 각각의 파일과 디렉터리마다 소유권과 허가권이라는 속성이 있다.
        
        - / rw- / r-- / r-- / 1 / root / root / 0 / 11월 12일 17일 17:59 / sample.txt

        파일유형 / 파일허가권 / 링크 수 / 파일 소유자 이름 / 파일 소유그룹 이름 / 파일 크기 / 마지막 변경 날짜,시간 / 파일 이름


## 파일 유형
_파일이 어떤 종류인지 나타낸다._

* 디렉터리인 경우 'd', 일반적인 파일인 경우 '-'가 표시된다.

## 파일 허가권

_파일 허가권은 rw-, r--, r-- 3개씩 끊어서 인식_

* 첫 번째 rw- 는 소유자의 파일 접근 권한
* 두 번째 r-- 는 그룹의 파일 접근 권한
* 세 번째 r-- 는 그 외 사용자의 파일 접근 권한을 의미

## 파일 소유권
_파일을 소유한 사용자와 그룹을 의미한다._

        chown 새로운사용자이름(.새로운그룹이름) 파일이름

---
## 링크
* 파일의 링크는 **하드링크** 와 **심볼릭 링크** 이렇게 두 가지가 있다.

- 원본파일과 하드링크는 같은 inode1를 사용
- 심볼릭 링크 파일은 inode2 를 사용하며 원본 파일 포인터를 가리킨다.

---

## 리눅스 관리자를 위한 명령어

* CentOS에서 패키지를 설치하는 데 가장 많이 사용되는 것은 RPM과 DNF


### RPM

* 레드햇 사에서 Windows의 setup, exe와 같이 프로그램 설치 후 바로 실행할 수 있는 설치 파일을 제작

* rpm 파일의 형식
        
        패키지이름-버전-릴리스번호.CentOS버전.아키텍처.rpm

---

## 자주 사용하는 rpm 명령어 옵션

### 설치
_rmp -Uvh 패키지파일이름.rpm_

        * U(대문자) : 기존에 패키지가 설치되지 않았다면 일반적인 설치를 진행하고, 패키지가 설치되어 있다면 업그레이드
        * v : 설치 과정 확인
        * h : 설치 진행 과정을 # 기호로 화면에 출력

### 삭제
_rpm -e 패키지 이름_
        
        * e : erase(지움)의 약자

### 이미 설치된 패키지 조회

        * rpm -qa 패키지이름 : 시스템에 패키지가 설치되었는지 확인
        * rpm -qf 파일의 절대경로 : 이미 설치된 파일이 어느 패키지에 포함된 것인지 확인
        * rpm -ql 패키지이름 : 특정 패키지에 어떤 파일들이 포함되었는지 확인
        * rpm -qi 패키지이름 : 설치된 패키지의 상세 정보

### 아직 설치되지 않은 rpm 파일 조회

        * rpm -qlp 패키지이름파일.rpm : 패키지 파일에 어떤 파일들이 포함되었는지 확인
        * rpm -qlp 패키지이름파일.rpm : 패키지 파일의 상세 정보

### RPM의 단점
* 가장 큰 문제 **의존성**
* 이러한 문제를 해결한 것이 **dnf**

---
## DNF
* DNF 명령은 rpm 명령의 패키지 의존성 문제를 완전히 해결해준다.
* rpm 명령어는 설치하려는 rpm 파일이 DVD에 있거나 인터넷에서 미리 다운로드 한 후 설치해야 한다.
* 하지만 DNF는 CentOS 프로젝트각 제공하는 rpm 파일 저장소에서 설치할 rpm 파일은 물론, 해당 파일과 의존성이 있는 다른 rpm 파일까지 인터넷을 통해 모두 알아서 다운로드 한 후 자동으로 설치까지 해준다.

### DNF 기본 사용법

* 기본설치방법
        
        dnf -y intall 패키지이름

* rpm 파일 설치 방법

        dnf install rpm파일이름.rpm

* 업데이트 가능한 목록 보기

        dnf check-update

* 업데이트

        dnf update 패키지이름

* 삭제 
        
        dnf remove 패키지이름

* 정보확인

        dnf info 패키지이름

### DNF 고급 사용법

* 패키지 그룹 설치
        
        dnf groupinstall "패키지그룹이름"

* 패키지 리스트 확인

        dnf list 패키지이름

* 특정 파일이 속한 패키지 이름 확인

        dnf provides 파일이름

* GPG 키 검사 생략

        dnf install --nogpgcheck rpm파일이름.rpm

* 기존 저장소 목록 지우기
        
        dnf clean all
---

**This.repo vkdlfdml [BaseOS]나 [AppStream] 식별자 부분만 사용하므로 다음 부분만 살펴보기**

* name : 저장소의 이름

* baseurl : URL이 적혀있어야 한다. http, ftp, file 3가지 중 하나가 오면 된다.

* gpgcheck : 패키지의 GPG 서명을 확인할 지 여부를 1(사용), 0(사용 안 함)으로 지정할 수 있다.

* mirrorlist : baseurl에 설정 값이 생략되어 있으면 그 대신 mirrorlist에 적힌 URL이 사용된다.

* enabled : 이 저장소를 사용할지의 여부를 1(사용), 0(사용안함)으로 지정할 수 있다.

_이 중에서 꼭 필요한 것은 **식별자**와 name, baseurl, gpgcheck 정도_

---

## 파일 압축과 묶기

### 파일 압축

* 리눅스에서 많이 볼 수 있는 압축 파일의 확장명은 xz, bz2, gz, zip, Z 등이다.

### xz 

_확장명 xz로 압축하거나 풀어줌. 비교적 최신 압축 명령이며 압축률이 뛰어남_

        * xz 파일이름 : 파일이름을 압축 파일인 '파일이름.xz'로 만들며 기존 파일은 삭제됨
        * xz -d 파일이름.xz : '파일이름.xz' 압축 파일을 일반 파일인 '파일이름'으로 만듦
        * xz -l 파일이름.xz : '파일이름.xz' 압축 파일에 포함된 파일 목록과 압축률 등을 출력
        * xz -k 파일이름 : 압축 후에 기존 파일을 삭제하지 않고 그대로 둠

**나머지 bzip2, bunzip2, gzip, gunzip, zip, unzip 등은 xz와 사용방법이 유사함**

## 파일 묶기

* 리눅스에서는 '파일 압축'과 '파일 묶기'를 원칙적으로 별개의 프로그램으로 실행하도록 되어있다.

* 파일 묶기 명령어는 tar 이며 묶인 파일의 확장도 tar 이다.

        [동작]
        * c(소문자) : 새로운 묶음을 만듦
        * x : 묶인 파일을 풀어줌
        * t : 묶음을 풀기 전에 묶인 경로를 보여줌
        * C(대문자) : 묶음을 풀 때 지정된 디렉터리에 압축을 풀어줌. 지정하지 않으면 묶을 때와 동일한 디렉터리에 묶음이 풀림

        [옵션]
        * f(필수) : 묶음 파일 이름 지정. 원래 tar는 테이프 장치 백업이 기본임
        * v : visual의 의미로 파일이 묶이거나 풀리는 과정을 보여줌
        * J : tar + xz
        * z : tar + gzip
        * j : tar + bzip2

## 파일 위치 검색

* 리눅스에서 특정 파일의 위치를 검색하는 명령어는 find이다.

### find

        [옵션]
        * -name, -user(소유자)
        * -newer(전,후)
        * -perm(허가권)
        * -size(크기)
        
        [action]
        * -print(기본값)
        * -exec(외부 명령 실행)
